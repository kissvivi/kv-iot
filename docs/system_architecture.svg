<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <!-- 背景和标题 -->
  <rect width="800" height="600" fill="#f5f5f5" rx="10" ry="10"/>
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">kv-iot 云边一体化物联网平台系统架构</text>
  
  <!-- 设备层 -->
  <rect x="50" y="100" width="700" height="100" rx="10" ry="10" fill="#e3f2fd" stroke="#2196f3" stroke-width="2"/>
  <text x="400" y="130" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1976d2">设备层</text>
  
  <!-- 设备图标 -->
  <rect x="100" y="150" width="100" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1976d2" stroke-width="1"/>
  <text x="150" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#0d47a1">MQTT设备</text>
  
  <rect x="250" y="150" width="100" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1976d2" stroke-width="1"/>
  <text x="300" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#0d47a1">TCP设备</text>
  
  <rect x="400" y="150" width="100" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1976d2" stroke-width="1"/>
  <text x="450" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#0d47a1">HTTP设备</text>
  
  <rect x="550" y="150" width="80" height="50" rx="5" ry="5" fill="#bbdefb" stroke="#1976d2" stroke-width="1"/>
  <text x="590" y="180" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#0d47a1">...</text>
  
  <!-- 数据中心服务（核心衔接） -->
  <rect x="250" y="250" width="300" height="120" rx="10" ry="10" fill="#ffecb3" stroke="#ff9800" stroke-width="3"/>
  <text x="400" y="280" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#e65100">数据中心服务</text>
  <text x="400" y="310" font-family="Arial, sans-serif" font-size="16" text-anchor="middle" fill="#bf360c">(datacenter) - 核心衔接组件</text>
  
  <!-- 其他服务 -->
  <rect x="100" y="380" width="120" height="60" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1"/>
  <text x="160" y="415" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#bf360c">认证服务<br/>(auth)</text>
  
  <rect x="270" y="380" width="140" height="60" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1"/>
  <text x="340" y="415" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#bf360c">设备管理服务<br/>(device)</text>
  
  <rect x="460" y="380" width="140" height="60" rx="5" ry="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1"/>
  <text x="530" y="415" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#bf360c">规则引擎服务<br/>(rule)</text>
  
  <!-- 数据层 -->
  <rect x="50" y="480" width="700" height="50" rx="10" ry="10" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2"/>
  <text x="400" y="510" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4a148c">数据存储层: MySQL + InfluxDB</text>
  
  <!-- 前端界面 -->
  <rect x="650" y="280" width="100" height="80" rx="5" ry="5" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="700" y="320" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#bf360c">前端界面</text>
  
  <!-- 连接箭头 -->
  <!-- 设备到数据中心服务（突出主连接） -->
  <line x1="150" y1="200" x2="150" y2="300" stroke="#666" stroke-width="2"/>
  <polygon points="150,305 145,295 155,295" fill="#666"/>
  
  <line x1="300" y1="200" x2="300" y2="250" stroke="#666" stroke-width="2"/>
  <polygon points="300,255 295,245 305,245" fill="#666"/>
  
  <line x1="450" y1="200" x2="450" y2="250" stroke="#666" stroke-width="2"/>
  <polygon points="450,255 445,245 455,245" fill="#666"/>
  
  <line x1="590" y1="200" x2="590" y2="290" stroke="#666" stroke-width="2"/>
  <polygon points="590,295 585,285 595,285" fill="#666"/>
  
  <!-- 数据中心服务到其他服务（突出衔接作用） -->
  <line x1="400" y1="370" x2="400" y2="380" stroke="#ff6600" stroke-width="3"/>
  <polygon points="400,385 395,375 405,375" fill="#ff6600"/>
  
  <line x1="250" y1="310" x2="270" y2="410" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="270,410 262,402 262,418" fill="#666"/>
  
  <line x1="550" y1="310" x2="460" y2="410" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="460,410 468,402 468,418" fill="#666"/>
  
  <!-- 数据中心服务到前端 -->
  <line x1="550" y1="310" x2="650" y2="320" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <polygon points="650,320 642,312 642,328" fill="#666"/>
  
  <!-- 服务到数据层（数据中心服务为主连接） -->
  <line x1="400" y1="370" x2="400" y2="480" stroke="#ff6600" stroke-width="3"/>
  <polygon points="400,485 395,475 405,475" fill="#ff6600"/>
  
  <line x1="160" y1="440" x2="160" y2="480" stroke="#666" stroke-width="1" stroke-dasharray="5,5"/>
  <polygon points="160,485 155,475 165,475" fill="#666"/>
  
  <line x1="340" y1="440" x2="340" y2="480" stroke="#666" stroke-width="1" stroke-dasharray="5,5"/>
  <polygon points="340,485 335,475 345,475" fill="#666"/>
  
  <line x1="530" y1="440" x2="530" y2="480" stroke="#666" stroke-width="1" stroke-dasharray="5,5"/>
  <polygon points="530,485 525,475 535,475" fill="#666"/>
  
  <!-- 核心衔接说明 -->
  <text x="400" y="220" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#d32f2f">👇 核心衔接 👇</text>
</svg>